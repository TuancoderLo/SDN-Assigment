<div class="hero-section bg-primary text-white py-5 mb-5">
  <div class="container text-center">
    <h1 class="display-4 mb-3">
      <i class="fas fa-spray-can me-3"></i>
      Welcome to Perfume Store
    </h1>
    <p class="lead mb-4">
      Discover your perfect scent from our premium collection
    </p>
    <a href="/perfumes" class="btn btn-light btn-lg">
      <i class="fas fa-search me-2"></i>
      Browse Perfumes
    </a>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-md-4 mb-4">
      <div class="card h-100 shadow">
        <div class="card-body text-center">
          <i class="fas fa-spray-can fa-3x text-primary mb-3"></i>
          <h5 class="card-title">Premium Perfumes</h5>
          <p class="card-text">
            Explore our collection of luxury perfumes from top brands worldwide.
          </p>
          <a href="/perfumes" class="btn btn-primary">View Perfumes</a>
        </div>
      </div>
    </div>

    <div class="col-md-4 mb-4">
      <div class="card h-100 shadow">
        <div class="card-body text-center">
          <i class="fas fa-tags fa-3x text-success mb-3"></i>
          <h5 class="card-title">Top Brands</h5>
          <p class="card-text">
            Discover perfumes from the world's most prestigious fragrance
            houses.
          </p>
          <a href="/brands" class="btn btn-success">View Brands</a>
        </div>
      </div>
    </div>

    <div class="col-md-4 mb-4">
      <div class="card h-100 shadow">
        <div class="card-body text-center">
          <i class="fas fa-users fa-3x text-info mb-3"></i>
          <h5 class="card-title">Join Community</h5>
          <p class="card-text">
            Connect with other perfume enthusiasts and share your experiences.
          </p>
          <a href="/members" class="btn btn-info">View Members</a>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-5">
    <div class="col-12">
      <h2 class="text-center mb-4">Featured Collections</h2>
      <div class="row" id="featured-perfumes">
        <!-- Perfumes will be loaded here via JavaScript -->
        <div class="col-12 text-center">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <p class="mt-2">Loading featured perfumes...</p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Load featured perfumes
async function loadFeaturedPerfumes() {
  const container = document.getElementById('featured-perfumes');
  
  try {
    const response = await fetch('/api/perfumes?limit=6');
    const data = await response.json();
    
    if (data.success && data.data && data.data.perfumes && data.data.perfumes.length > 0) {
      container.innerHTML = data.data.perfumes.map(perfume => `
        <div class="col-md-4 mb-4">
          <div class="card h-100 shadow-sm">
            ${perfume.uri ? `
              <img src="${perfume.uri}" class="card-img-top" style="height: 200px; object-fit: cover;" 
                   alt="${perfume.name || perfume.perfumeName}" 
                   onerror="this.src='https://via.placeholder.com/300x200?text=No+Image'">
            ` : `
              <div style="height: 200px; background: #6c757d;" class="d-flex align-items-center justify-content-center">
                <i class="fas fa-spray-can fa-4x text-white"></i>
              </div>
            `}
            <div class="card-body">
              <h5 class="card-title">${perfume.name || perfume.perfumeName}</h5>
              <div class="mb-2">
                <span class="badge bg-primary">
                  ${perfume.brand && (perfume.brand.name || perfume.brand.brandName) ? 
                    (perfume.brand.name || perfume.brand.brandName) : 'Unknown Brand'}
                </span>
                <span class="badge bg-success">$${perfume.price}</span>
                <span class="badge bg-info">${perfume.volume || perfume.size || 100}ml</span>
              </div>
              <p class="card-text text-muted small">
                ${(perfume.description || 'No description available').substring(0, 100)}...
              </p>
              <div class="d-flex justify-content-between align-items-center">
                <small class="text-muted">
                  <i class="fas fa-user me-1"></i>${perfume.targetAudience || 'Unisex'}
                </small>
                <a href="/perfumes/${perfume._id}" class="btn btn-sm btn-primary">
                  <i class="fas fa-eye me-1"></i>View
                </a>
              </div>
            </div>
          </div>
        </div>
      `).join('');
    } else {
      container.innerHTML = `
        <div class="col-12">
          <div class="alert alert-info text-center">
            <i class="fas fa-info-circle me-2"></i>
            No perfumes available at the moment.
          </div>
        </div>
      `;
    }
  } catch (error) {
    console.error('Error loading perfumes:', error);
    container.innerHTML = `
      <div class="col-12">
        <div class="alert alert-danger text-center">
          <i class="fas fa-exclamation-triangle me-2"></i>
          Failed to load perfumes. Please try again later.
        </div>
      </div>
    `;
  }
}

// Load on page ready
document.addEventListener('DOMContentLoaded', loadFeaturedPerfumes);
</script>
